<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ID Student Survival Test | å·¥ä¸šè®¾è®¡ç³»ç”Ÿå­˜å¤§æ‘¸åº•</title>
    <style>
        :root {
            --primary: #FF5E00; /* æ´»åŠ›æ©™ï¼Œä»£è¡¨å·¥ä¸šè®¾è®¡çš„åˆ›é€ åŠ› */
            --secondary: #1D1D1F;
            --bg: #F2F2F7;
            --card: #FFFFFF;
            --gray: #86868B;
            --star-active: #FFD60A;
            --radius: 24px;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, "PingFang SC", "Segoe UI", Roboto, Helvetica, Arial, sans-serif;
            background-color: var(--bg);
            color: var(--secondary);
            margin: 0;
            padding: 0;
            display: flex;
            justify-content: center;
            min-height: 100vh;
        }

        .container {
            width: 100%;
            max-width: 680px;
            margin: 40px 20px;
            position: relative;
        }

        /* æ ‡é¢˜åŒº */
        header {
            text-align: center;
            margin-bottom: 30px;
        }
        h1 { font-size: 26px; margin-bottom: 8px; font-weight: 800; }
        .subtitle { color: var(--gray); font-size: 14px; }

        /* è¿›åº¦æ¡ */
        .progress-track {
            background: #E5E5EA;
            height: 6px;
            border-radius: 10px;
            margin-bottom: 20px;
            overflow: hidden;
        }
        .progress-fill {
            background: var(--primary);
            height: 100%;
            width: 0%;
            transition: width 0.4s ease;
        }

        /* å¡ç‰‡å®¹å™¨ */
        .card {
            background: var(--card);
            border-radius: var(--radius);
            padding: 30px;
            box-shadow: 0 8px 30px rgba(0,0,0,0.06);
            transition: all 0.3s ease;
        }

        .section-tag {
            display: inline-block;
            background: #FFF0E6;
            color: var(--primary);
            font-size: 12px;
            font-weight: 700;
            padding: 6px 12px;
            border-radius: 100px;
            margin-bottom: 20px;
        }

        .question-text {
            font-size: 19px;
            font-weight: 700;
            line-height: 1.5;
            margin-bottom: 25px;
        }

        /* é€‰é¡¹æŒ‰é’® (å•é€‰) */
        .btn-option {
            display: block;
            width: 100%;
            text-align: left;
            background: #F5F5F7;
            border: 2px solid transparent;
            padding: 16px 20px;
            margin-bottom: 12px;
            border-radius: 16px;
            font-size: 15px;
            cursor: pointer;
            transition: all 0.2s;
            color: var(--secondary);
        }
        .btn-option:hover { background: #EBEBF0; }
        .btn-option.selected {
            border-color: var(--primary);
            background: #FFF0E6;
            color: var(--primary);
            font-weight: 600;
        }

        /* æ˜Ÿçº§æ‰“åˆ† */
        .star-container {
            display: flex;
            justify-content: center;
            gap: 10px;
            margin: 30px 0;
        }
        .star-btn {
            font-size: 32px;
            cursor: pointer;
            transition: transform 0.2s;
            color: #E5E5EA;
        }
        .star-btn:hover { transform: scale(1.2); }
        .star-btn.active { color: var(--star-active); }
        .star-desc {
            text-align: center;
            font-size: 14px;
            color: var(--gray);
            height: 20px;
        }

        /* æ’åºé¢˜æ ·å¼ */
        .sort-area {
            display: flex;
            flex-direction: column;
            gap: 10px;
        }
        .sort-item {
            background: #fff;
            border: 1px solid #E5E5EA;
            padding: 15px;
            border-radius: 12px;
            cursor: pointer;
            display: flex;
            justify-content: space-between;
            align-items: center;
            transition: all 0.2s;
        }
        .sort-item:hover { border-color: var(--primary); }
        .sort-item.picked {
            background: var(--primary);
            color: white;
            border-color: var(--primary);
        }
        .rank-badge {
            background: rgba(255,255,255,0.3);
            width: 24px;
            height: 24px;
            border-radius: 50%;
            text-align: center;
            line-height: 24px;
            font-size: 12px;
            font-weight: bold;
            display: none;
        }
        .picked .rank-badge { display: block; }
        .sort-reset {
            text-align: center;
            margin-top: 15px;
            color: var(--gray);
            font-size: 13px;
            cursor: pointer;
            text-decoration: underline;
        }

        /* Yes/No æŒ‰é’® */
        .yn-container {
            display: flex;
            gap: 15px;
        }
        .yn-btn {
            flex: 1;
            padding: 20px;
            border-radius: 16px;
            border: 2px solid #E5E5EA;
            background: white;
            font-size: 18px;
            font-weight: 600;
            cursor: pointer;
        }
        .yn-btn.yes:hover, .yn-btn.yes.selected { border-color: #34C759; color: #34C759; background: #E8F5E9; }
        .yn-btn.no:hover, .yn-btn.no.selected { border-color: #FF3B30; color: #FF3B30; background: #FFEBEE; }

        /* åº•éƒ¨å¯¼èˆª */
        .nav-actions {
            margin-top: 30px;
            text-align: center;
        }
        .next-btn {
            background: var(--secondary);
            color: white;
            border: none;
            padding: 15px 50px;
            border-radius: 100px;
            font-size: 16px;
            font-weight: 600;
            cursor: pointer;
            transition: transform 0.2s;
        }
        .next-btn:hover { transform: scale(1.05); }
        .next-btn:disabled { opacity: 0.5; cursor: not-allowed; }

        /* ç»“æœé¡µ */
        .result-box { display: none; animation: fadeIn 0.8s; }
        .result-header { text-align: center; margin-bottom: 30px; border-bottom: 1px solid #eee; padding-bottom: 20px;}
        .result-title { font-size: 28px; font-weight: 800; color: var(--primary); margin: 10px 0; }
        
        .advice-card {
            background: #F9F9FB;
            border-left: 4px solid var(--primary);
            padding: 15px 20px;
            margin-bottom: 15px;
            border-radius: 8px;
        }
        .advice-title { font-weight: 700; margin-bottom: 5px; display: block; }

        @keyframes fadeIn { from { opacity: 0; transform: translateY(20px); } to { opacity: 1; transform: translateY(0); } }

        /* Start Screen */
        .intro-screen { text-align: center; padding: 40px; }
        .intro-emoji { font-size: 60px; margin-bottom: 20px; }
    </style>
</head>
<body>

<div class="container">
    <header>
        <h1>ğŸ“ ID Survival Test</h1>
        <div class="subtitle">è®¾è®¡ç³»ç”Ÿå­˜å¤§æ‘¸åº• Â· Proç‰ˆ</div>
    </header>

    <!-- 1. Intro Screen -->
    <div id="intro" class="card intro-screen">
        <div class="intro-emoji">ğŸ› ï¸</div>
        <h2 style="margin-top:0;">åŒå­¦ï¼Œä½ çš„è‚è¿˜å¥½å—ï¼Ÿ</h2>
        <p style="color: #666; line-height: 1.6;">
            è¿™ä¸æ˜¯è€ƒè¯•ï¼Œè¿™æ˜¯ä¸€æ¬¡çµé­‚æ‹·é—®ã€‚<br>
            æµ‹æµ‹ä½ åˆ°åº•æ˜¯è¯¥å»å¤§å‚å·è½åœ°ï¼Œ<br>
            è¿˜æ˜¯è¯¥å‡ºå›½æè‰ºæœ¯ï¼Œ<br>
            æˆ–è€…æ˜¯è¶æ—©è½¬è¡Œå–ç‚’ç²‰ã€‚
        </p>
        <button class="next-btn" style="margin-top: 20px;" onclick="startQuiz()">å¼€å§‹æ‘¸åº•</button>
    </div>

    <!-- 2. Quiz Interface -->
    <div id="quiz-ui" style="display: none;">
        <div class="progress-track"><div class="progress-fill" id="progress"></div></div>
        <div id="card-container"></div>
        <div class="nav-actions">
            <button class="next-btn" id="next-btn" onclick="nextQuestion()" disabled>ä¸‹ä¸€é¢˜</button>
        </div>
    </div>

    <!-- 3. Result Interface -->
    <div id="result-ui" class="result-box card">
        <!-- Results injected by JS -->
    </div>
</div>

<script>
    // --- é¢˜åº“æ•°æ® ---
    const questions = [
        // Part 1: Brain (Choice)
        {
            section: "ğŸ§  Part 1: å¤§è„‘æ„é€ ",
            type: "choice",
            text: "Q1. å½“è€å¸ˆå¸ƒç½®äº†ä¸€ä¸ªæ–°é¢˜ç›®ï¼ˆæ¯”å¦‚è®¾è®¡ä¸€ä¸ªâ€œæœªæ¥çš„æ¯å­â€ï¼‰ï¼Œä½ ç¬¬ä¸€ååº”æ˜¯ï¼š",
            options: [
                { text: "A. è„‘æ´æ´¾ï¼šâ€œæ¯å­ä¸ºä»€ä¹ˆä¸€å®šè¦å–æ°´ï¼Ÿç”¨æ¥å¸ç©ºæ°”è¡Œä¸è¡Œï¼Ÿâ€", scores: { art: 2, global: 2 } },
                { text: "B. å®ç”¨æ´¾ï¼šâ€œç°åœ¨çš„æ¯å­å¤ªçƒ«æ‰‹ï¼Œæˆ‘è¦è§£å†³éš”çƒ­é—®é¢˜ã€‚â€", scores: { logic: 2, local: 2 } }
            ]
        },
        {
            section: "ğŸ§  Part 1: å¤§è„‘æ„é€ ",
            type: "choice",
            text: "Q2. å…³äºâ€œå‚è€ƒå›¾â€ (Pinterest/Behance)ï¼Œä½ çš„æ”¶è—å¤¹é€šå¸¸æ˜¯ï¼š",
            options: [
                { text: "A. é¢œå€¼å…šï¼šå…¨æ˜¯ç‚«é…·æ¸²æŸ“ã€èµ›åšæœ‹å…‹ï¼Œå¸…å°±å®Œäº†ã€‚", scores: { art: 2, render: 1 } },
                { text: "B. ç»“æ„å…šï¼šçˆ†ç‚¸å›¾ã€æ‹†è§£å›¾ã€ç²¾å·§çš„å°æœºæ„ã€‚", scores: { logic: 2, structure: 2 } }
            ]
        },
        {
            section: "ğŸ§  Part 1: å¤§è„‘æ„é€ ",
            type: "choice",
            text: "Q3. å¦‚æœè®©ä½ åšä¸€æ•´å¤©â€œé‡å¤æ€§å·¥ä½œâ€ï¼Œå“ªä¸ªè®©ä½ ç¨å¾®æ²¡é‚£ä¹ˆæƒ³æ­»ï¼Ÿ",
            options: [
                { text: "A. æ’ç‰ˆä¿®å›¾ï¼šPå›¾ã€è°ƒå­—ä½“é—´è·ï¼ŒæŠŠç‰ˆé¢å¼„å¥½çœ‹ã€‚", scores: { art: 1, layout: 2 } },
                { text: "B. è°ƒæ•´æ¨¡å‹ï¼šåœ¨è½¯ä»¶é‡Œæ‹‰ç‚¹ã€è°ƒå€’è§’ã€ä¿®å‚æ•°ã€‚", scores: { logic: 1, structure: 2 } }
            ]
        },

        // Part 2: Skills (Stars 1-5)
        {
            section: "âœï¸ Part 2: æŠ€èƒ½æ ‘ (1-5æ˜Ÿ)",
            type: "stars",
            text: "Q4. ã€æ‰‹ç»˜è‰å›¾ã€‘çº¿æ¡è‡ªä¿¡å—ï¼Ÿé€è§†å‡†å—ï¼Ÿ<br><span style='font-size:14px;color:#999'>(1æ˜Ÿ=å°å­¦ç”Ÿæ¶‚é¸¦ / 5æ˜Ÿ=å¤§ç¥çº§åˆ«)</span>",
            key: "sketch"
        },
        {
            section: "âœï¸ Part 2: æŠ€èƒ½æ ‘ (1-5æ˜Ÿ)",
            type: "stars",
            text: "Q5. ã€3D å»ºæ¨¡ã€‘é‡åˆ°æ€ªå¼‚å½¢çŠ¶èƒ½å»ºå‡ºæ¥å—ï¼Ÿ<br><span style='font-size:14px;color:#999'>(1æ˜Ÿ=åªä¼šæ‹‰æ–¹å— / 5æ˜Ÿ=æ›²é¢éšå¿ƒæ‰€æ¬²)</span>",
            key: "modeling"
        },
        {
            section: "âœï¸ Part 2: æŠ€èƒ½æ ‘ (1-5æ˜Ÿ)",
            type: "stars",
            text: "Q6. ã€æ¸²æŸ“å‡ºå›¾ã€‘çœ‹èµ·æ¥çœŸå®é«˜çº§å—ï¼Ÿ<br><span style='font-size:14px;color:#999'>(1æ˜Ÿ=å¡‘æ–™ç©å…· / 5æ˜Ÿ=å®˜ç½‘å¤§ç‰‡)</span>",
            key: "rendering"
        },
        {
            section: "âœï¸ Part 2: æŠ€èƒ½æ ‘ (1-5æ˜Ÿ)",
            type: "stars",
            text: "Q7. ã€åŠ¨æ‰‹åˆ¶ä½œã€‘å»æ¨¡å‹æˆ¿ç£¨æ³¡æ²«ã€å–·æ¼†ã€ç²˜èƒ¶æ°´ã€‚<br><span style='font-size:14px;color:#999'>(1æ˜Ÿ=å¸æ¯’æ°”æ•‘å‘½ / 5æ˜Ÿ=å°±æ˜¯å–œæ¬¢åŠ¨æ‰‹)</span>",
            key: "prototype"
        },

        // Part 3: Scenario (Choice)
        {
            section: "ğŸ« Part 3: å·¥ä½œå®¤æƒ…å¢ƒ",
            type: "choice",
            text: "Q8. ã€å…³äºå°ç»„ä½œä¸šã€‘ä½ æ˜¯ä»¥ä¸‹å“ªç§äººï¼Ÿ",
            options: [
                { text: "A. æš´èºç»„é•¿ï¼šâ€œæ˜å¤©å¿…äº¤å›¾ï¼ä¸äº¤è¸¢äººï¼â€", scores: { leader: 2, local: 1 } },
                { text: "B. å»ºæ¨¡/æ¸²æŸ“å¤§è…¿ï¼šâ€œåˆ«åµäº†ï¼Œå›¾å‘æˆ‘ï¼Œæˆ‘é€šå®µæå®šã€‚â€", scores: { tech: 2, local: 1 } },
                { text: "C. åˆ’æ°´è‰ºæœ¯å®¶/æ¼”è®²æ‹…å½“ï¼šâ€œæˆ‘è´Ÿè´£è®²PPTå¿½æ‚ è€å¸ˆã€‚â€", scores: { soft: 2, global: 1 } }
            ]
        },
        {
            section: "ğŸ« Part 3: å·¥ä½œå®¤æƒ…å¢ƒ",
            type: "choice",
            text: "Q9. è€å¸ˆè¯´ï¼šâ€œæˆ‘è§‰å¾—è¿™ä¸ªé€ å‹å¤ªä¸‘äº†ï¼Œé‡åšã€‚â€ ä½ çš„å†…å¿ƒç‹¬ç™½ï¼š",
            options: [
                { text: "A. ä¸æœï¼šâ€œæ˜¯ä½ è€åœŸä¸æ‡‚æ¬£èµï¼â€ï¼ˆåšæŒè‡ªæˆ‘ï¼‰", scores: { art: 2, global: 2 } },
                { text: "B. æ‰¾é€»è¾‘ï¼šâ€œè¿™æ˜¯é…åˆåŠŸèƒ½çš„ï¼Œä¸æ˜¯ä¸ºäº†å¥½çœ‹ã€‚â€", scores: { logic: 2 } },
                { text: "C. åªè¦è¿‡å°±å¥½ï¼šâ€œå¥½çš„è€å¸ˆï¼Œæ‚¨ç»™ä¸ªå‚è€ƒå›¾æˆ‘ç…§æ”¹ã€‚â€", scores: { local: 2 } }
            ]
        },
        {
            section: "ğŸ« Part 3: å·¥ä½œå®¤æƒ…å¢ƒ",
            type: "choice",
            text: "Q10. è½¯ä»¶å´©äº†æ²¡ä¿å­˜ã€‚ä½ çš„ååº”ï¼š",
            options: [
                { text: "A. æ€è€ƒäººç”Ÿï¼šå‘†å5åˆ†é’Ÿï¼Œæƒ³å»å–çƒ¤å†·é¢ã€‚", scores: { burnout: 1 } },
                { text: "B. è‚Œè‚‰è®°å¿†ï¼šéª‚ä¸€å¥ï¼Œé‡å¯é‡ç”»ï¼Œç”»å¾—æ›´å¥½ã€‚", scores: { tech: 2, resilience: 2 } }
            ]
        },

        // Part 4: Values (Sorting)
        {
            section: "âš–ï¸ Part 4: ä»·å€¼è§‚æ’åº",
            type: "sort",
            text: "Q11. æ¯•ä¸šäº†ï¼Œè¿™å‡ ä¸ªOfferä½ æœ€æƒ³è¦å“ªä¸ªï¼Ÿ<br><span style='font-size:14px;color:#999'>(è¯·æŒ‰é¡ºåºç‚¹å‡»ï¼Œæœ€æƒ³è¦çš„æ’ç¬¬ä¸€)</span>",
            items: [
                { id: "A", text: "ğŸ’° é’±å¤šäº‹å°‘ (åšåœŸå‘³è®¾è®¡ä¹Ÿè¡Œ)", type: "money" },
                { id: "B", text: "ğŸ¢ å¤§å‚å…‰ç¯ (å·æ­»ä¹Ÿè®¤äº†)", type: "fame" },
                { id: "C", text: "ğŸ¨ å®¡ç¾è‡ªç”± (é’±å°‘ä½†åšè‰ºæœ¯)", type: "art" },
                { id: "D", text: "ğŸŒ æ”¹å˜ä¸–ç•Œ (åšå…¬ç›Š/ç¯ä¿)", type: "impact" }
            ]
        },

        // Part 5: New Tech (Y/N)
        {
            section: "ğŸ¤– Part 5: æ–°æ—¶ä»£åŠ åˆ†",
            type: "yn",
            text: "Q12. ä½ å¹³æ—¶ä¼šç”¨ AI (ChatGPT, Midjourney) å¸®ä½ å†™ä½œä¸šæˆ–æ‰¾çµæ„Ÿå—ï¼Ÿ",
            scores: { ai: 1 }
        },
        {
            section: "ğŸ¤– Part 5: æ–°æ—¶ä»£åŠ åˆ†",
            type: "yn",
            text: "Q13. ç›¸æ¯”å®ä½“éŸ³ç®±ï¼Œä½ æ˜¯å¦å¯¹è®¾è®¡éŸ³ç®±APPé‡Œçš„â€œäº¤äº’é€»è¾‘â€æ›´æ„Ÿå…´è¶£ï¼Ÿ",
            scores: { ux: 2 }
        },

        // Part 6: Study Abroad (Special Module)
        {
            section: "âœˆï¸ Part 6: ç•™å­¦ vs æ¬ç – (æ–°å¢)",
            type: "choice",
            text: "Q14. ä½ çš„ä½œå“é›†é‡Œï¼Œä½ æ›´æƒ³æ”¾ä»€ä¹ˆï¼Ÿ",
            options: [
                { text: "A. 5å¼ åƒè‹¹æœå®˜ç½‘ä¸€æ ·çš„å®Œç¾æ¸²æŸ“å›¾ã€‚", scores: { local: 2, render: 1 } },
                { text: "B. 50ä¸ªå¤±è´¥çš„è‰æ¨¡ç…§ç‰‡å’Œä¸€å¢™çš„ä¾¿åˆ©è´´ã€‚", scores: { global: 3, process: 2 } }
            ]
        },
        {
            section: "âœˆï¸ Part 6: ç•™å­¦ vs æ¬ç – (æ–°å¢)",
            type: "choice",
            text: "Q15. ä½ è§‰å¾—è®¾è®¡çš„ç»ˆæå¥¥ä¹‰æ˜¯ï¼Ÿ",
            options: [
                { text: "A. è§£å†³é—®é¢˜ï¼šå¥½ç”¨ã€ä¾¿å®œã€èƒ½é‡äº§ã€‚", scores: { local: 3, logic: 1 } },
                { text: "B. æå‡ºé—®é¢˜ï¼šå¼•å‘æ€è€ƒï¼Œå“ªæ€•ç°åœ¨é€ ä¸å‡ºæ¥ã€‚", scores: { global: 3, art: 1 } }
            ]
        },
        {
            section: "âœˆï¸ Part 6: ç•™å­¦ vs æ¬ç – (æ–°å¢)",
            type: "choice",
            text: "Q16. å¦‚æœä½ æœ‰æ—¶åœçš„ç‰¹å¼‚åŠŸèƒ½ï¼Œè¿™æ—¶è¦ä½ ç”¨è‹±è¯­åšä¸€ä¸ªå…¨ç­æ¼”è®² Presentation...",
            options: [
                { text: "A. æ€äº†æˆ‘å§ï¼Œæˆ‘åªè´Ÿè´£ç”»å›¾ã€‚", scores: { local: 1 } },
                { text: "B. æœ‰ç‚¹å…´å¥‹ï¼Œæˆ‘è¦ç”¨æ—¶åœè€ƒä¸ªä¸“å…«ï¼Œè®²ä¸ªæ•…äº‹æ„ŸåŠ¨å¤§å®¶ã€‚", scores: { global: 2, soft: 1 } }
            ]
        }
    ];

    // --- é€»è¾‘å¤„ç† ---
    let currentIdx = 0;
    let userScores = {
        art: 0, logic: 0, 
        global: 0, local: 0,
        sketch: 0, modeling: 0, rendering: 0, prototype: 0,
        ux: 0
    };
    
    // ä¸´æ—¶å­˜å‚¨æ’åºé¢˜ç­”æ¡ˆ
    let tempSortOrder = [];

    function startQuiz() {
        document.getElementById('intro').style.display = 'none';
        document.getElementById('quiz-ui').style.display = 'block';
        renderQuestion();
    }

    function renderQuestion() {
        const q = questions[currentIdx];
        const container = document.getElementById('card-container');
        const nextBtn = document.getElementById('next-btn');
        
        // Update Progress
        const pct = ((currentIdx) / questions.length) * 100;
        document.getElementById('progress').style.width = pct + "%";

        nextBtn.disabled = true; // disable until selected

        let html = `
            <div class="card">
                <div class="section-tag">${q.section}</div>
                <div class="question-text">${q.text}</div>
        `;

        // Render based on type
        if (q.type === 'choice') {
            q.options.forEach((opt, idx) => {
                html += `<button class="btn-option" onclick="selectChoice(${idx}, this)">${opt.text}</button>`;
            });
        } 
        else if (q.type === 'stars') {
            html += `<div class="star-container">`;
            for(let i=1; i<=5; i++) {
                html += `<div class="star-btn" onclick="selectStar(${i}, '${q.key}')">â˜…</div>`;
            }
            html += `</div><div class="star-desc" id="star-msg">è¯·æ‰“åˆ†</div>`;
        }
        else if (q.type === 'sort') {
            tempSortOrder = []; // reset
            html += `<div class="sort-area">`;
            q.items.forEach(item => {
                html += `
                    <div class="sort-item" id="sort-${item.id}" onclick="pickSort('${item.id}')">
                        <span>${item.text}</span>
                        <span class="rank-badge"></span>
                    </div>
                `;
            });
            html += `</div><div class="sort-reset" onclick="resetSort()">é‡ç½®æ’åº</div>`;
        }
        else if (q.type === 'yn') {
            html += `
                <div class="yn-container">
                    <button class="yn-btn yes" onclick="selectYN(true, this)">YES</button>
                    <button class="yn-btn no" onclick="selectYN(false, this)">NO</button>
                </div>
            `;
        }

        html += `</div>`; // close card
        container.innerHTML = html;
    }

    // --- äº¤äº’å‡½æ•° ---

    function selectChoice(optIdx, btn) {
        // Visual
        document.querySelectorAll('.btn-option').forEach(b => b.classList.remove('selected'));
        btn.classList.add('selected');
        
        // Logic (Store temporarily, apply on Next)
        const q = questions[currentIdx];
        // Note: For simplicity in this logical flow, we just mark readiness. 
        // In a complex app we'd store the selection index.
        btn.dataset.selectedScore = JSON.stringify(q.options[optIdx].scores);
        
        document.getElementById('next-btn').disabled = false;
    }

    function selectStar(val, key) {
        const stars = document.querySelectorAll('.star-btn');
        stars.forEach((s, i) => {
            if(i < val) s.classList.add('active');
            else s.classList.remove('active');
        });

        // Msg
        const msgs = ["æ±‚æ”¾è¿‡", "ä¸å¤ªè¡Œ", "å‡‘åˆå§", "æŒºè‡ªä¿¡", "æˆ‘æ˜¯å¤§ç¥"];
        document.getElementById('star-msg').innerText = msgs[val-1];

        // Store
        userScores[key] = val; // direct update
        document.getElementById('next-btn').disabled = false;
    }

    function pickSort(id) {
        if(tempSortOrder.includes(id)) return;
        tempSortOrder.push(id);
        
        // Update UI
        const el = document.getElementById('sort-'+id);
        el.classList.add('picked');
        el.querySelector('.rank-badge').innerText = "#" + tempSortOrder.length;

        // Enable button if all picked
        if(tempSortOrder.length === 4) {
            document.getElementById('next-btn').disabled = false;
        }
    }

    function resetSort() {
        tempSortOrder = [];
        document.querySelectorAll('.sort-item').forEach(el => {
            el.classList.remove('picked');
            el.querySelector('.rank-badge').innerText = "";
        });
        document.getElementById('next-btn').disabled = true;
    }

    function selectYN(isYes, btn) {
        document.querySelectorAll('.yn-btn').forEach(b => b.classList.remove('selected'));
        btn.classList.add('selected');
        
        const q = questions[currentIdx];
        if (isYes && q.scores) {
            // Store temp
             btn.dataset.addScores = JSON.stringify(q.scores);
        } else {
             btn.dataset.addScores = "{}";
        }
        document.getElementById('next-btn').disabled = false;
    }

    function nextQuestion() {
        // Apply scores from Choice/YN if pending
        const choiceBtn = document.querySelector('.btn-option.selected');
        if (choiceBtn && choiceBtn.dataset.selectedScore) {
            const s = JSON.parse(choiceBtn.dataset.selectedScore);
            for(let k in s) if(userScores[k] !== undefined) userScores[k] += s[k];
            else userScores[k] = s[k]; // init if not exist
        }

        const ynBtn = document.querySelector('.yn-btn.selected');
        if (ynBtn && ynBtn.dataset.addScores) {
            const s = JSON.parse(ynBtn.dataset.addScores);
            for(let k in s) {
                if(userScores[k] === undefined) userScores[k] = 0;
                userScores[k] += s[k];
            }
        }

        // Sorting scores logic (First choice gets most weight)
        if (questions[currentIdx].type === 'sort') {
            // Logic: 1st place gets +3 to that type
            const map = { "A": "money", "B": "local", "C": "art", "D": "global" }; 
            // Simplified mapping for demo
            if (tempSortOrder.length > 0) {
                const firstPick = tempSortOrder[0];
                if (firstPick === 'C') { userScores.art += 3; userScores.global +=1; }
                if (firstPick === 'D') { userScores.global += 3; }
                if (firstPick === 'B') { userScores.local += 3; }
                if (firstPick === 'A') { userScores.local += 2; }
            }
        }

        currentIdx++;
        if (currentIdx < questions.length) {
            renderQuestion();
        } else {
            showResult();
        }
    }

    // --- ç»“æœè®¡ç®— ---

    function showResult() {
        document.getElementById('quiz-ui').style.display = 'none';
        const resBox = document.getElementById('result-ui');
        resBox.style.display = 'block';

        // 1. Determine Archetype
        let archetype = "";
        let desc = "";
        
        // Analyze Scores
        let hardSkills = (userScores.modeling || 0) + (userScores.rendering || 0) + (userScores.prototype || 0);
        let artSense = (userScores.art || 0) + (userScores.sketch || 0);
        let globalBias = (userScores.global || 0);
        let localBias = (userScores.local || 0);
        let uxBias = (userScores.ux || 0);

        // Core logic
        if (uxBias >= 2 && userScores.logic >= 2) {
            archetype = "äº¤äº’ä½“éªŒè®¾è®¡å¸ˆ (UX/UI)";
            desc = "ä½ å¯¹å®ä½“äº§å“çš„æ‰§å¿µä¸æ·±ï¼Œåå€’å¯¹é€»è¾‘ã€æµç¨‹å’Œç•Œé¢æ„Ÿå…´è¶£ã€‚åˆ«åœ¨å·¥ä¸šè®¾è®¡æ­»ç£•äº†ï¼Œè½¬è¡Œå»åšäº’è”ç½‘äº¤äº’ï¼Œå·¥èµ„é«˜ï¼Œéœ€æ±‚å¤§ã€‚";
        } else if (hardSkills > 12) {
            archetype = "å…­è¾¹å½¢æˆ˜å£« / è½åœ°å¤§ç¥";
            desc = "ä½ çš„æ‰‹å¤´åŠŸå¤«æå…¶æ‰å®ï¼Œå»ºæ¨¡æ¸²æŸ“æ ·æ ·ç²¾é€šã€‚ä½ æ˜¯æ‰€æœ‰å·¥ä½œå®¤äº‰æŠ¢çš„â€œå¤§è…¿â€ã€‚ä½ åœ¨å›½å†…å¤§å‚æˆ–è®¾è®¡å…¬å¸ä¼šéå¸¸æŠ¢æ‰‹ï¼Œå› ä¸ºä½ èƒ½æŠŠä¸œè¥¿åšå‡ºæ¥ã€‚";
        } else if (artSense > hardSkills && globalBias > localBias) {
            archetype = "è§‚å¿µè‰ºæœ¯å®¶ / Concept Artist";
            desc = "ä½ è„‘æ´å¾ˆå¤§ï¼Œå®¡ç¾å¾ˆå¥½ï¼Œä½†æ˜¯ä¸æƒ³åšæ¯ç‡¥çš„ç»“æ„ã€‚ä½ å¤©ç”Ÿé€‚åˆå‡ºå›½ï¼ˆRCA, DAE, CSMï¼‰ï¼Œå»æ¢ç´¢è®¾è®¡çš„è¾¹ç•Œï¼Œè€Œä¸æ˜¯åœ¨å›½å†…ç”»å›¾çº¸ã€‚";
        } else {
            archetype = "å…¨èƒ½äº§å“ç»ç†å‹";
            desc = "ä½ å¯èƒ½æ‰‹ç»˜ä¸æ˜¯æœ€é¡¶çš„ï¼Œå»ºæ¨¡ä¸æ˜¯æœ€å¿«çš„ï¼Œä½†ä½ é€»è¾‘æ¸…æ™°ï¼Œæ‡‚å–èˆã€‚ä½ å¾ˆé€‚åˆåšäº§å“ç»ç†ï¼ˆPMï¼‰æˆ–è€…å»ä¼ä¸šå†…éƒ¨åšè®¾è®¡ç®¡ç†ã€‚";
        }

        // 2. Study Abroad Suggestion
        let abroadAdvice = "";
        if (globalBias > localBias + 2) {
            abroadAdvice = "<span style='color:#007AFF'>âœˆï¸ å¼ºçƒˆå»ºè®®å‡ºå›½ã€‚</span> å›½å†…çš„è½åœ°ç¯å¢ƒä¼šè®©ä½ çª’æ¯ã€‚å»è‹±å›½ï¼ˆRCA/CSMï¼‰åšæ€è¾¨ï¼Œæˆ–è€…å»ç¾å›½ï¼ˆArtCenterï¼‰ç»ƒæè‡´é€ å‹ã€‚";
        } else if (localBias > globalBias) {
            abroadAdvice = "<span style='color:#34C759'>ğŸ  å»ºè®®å›½å†…å‘å±•ã€‚</span> ä½ å¾ˆåŠ¡å®ï¼Œå…³æ³¨è§£å†³é—®é¢˜ã€‚ä¸­å›½çš„äº§ä¸šé“¾ä¼˜åŠ¿æœ€é€‚åˆä½ å‘æŒ¥ã€‚å»æ·±åœ³ã€å»è½¦ä¼ï¼Œé‚£é‡Œæ˜¯ä½ çš„æˆ˜åœºã€‚";
        } else {
            abroadAdvice = "ğŸ¤” ä¸¤è€…çš†å¯ã€‚ä½ å¯ä»¥å…ˆå·¥ä½œä¸¤å¹´ï¼Œæ”’ç‚¹é’±å’Œè¿·èŒ«ï¼Œå†å†³å®šè¦ä¸è¦å‡ºå»é•€é‡‘ã€‚";
        }

        // Render HTML
        resBox.innerHTML = `
            <div class="result-header">
                <div style="font-size:14px;color:#999;margin-bottom:10px;">ä½ çš„ç”Ÿå­˜æ¨¡å¼é‰´å®šä¸º</div>
                <div class="result-title">${archetype}</div>
                <p style="color:#666;">${desc}</p>
            </div>

            <div class="advice-card">
                <span class="advice-title">ğŸŒ ç•™å­¦ vs å°±ä¸šè¯Šæ–­</span>
                ${abroadAdvice}
            </div>

            <div class="advice-card">
                <span class="advice-title">ğŸ“Š æŠ€èƒ½é›·è¾¾</span>
                æ‰‹å¤´åŠŸå¤« (Hard Skills): ${hardSkills}/15<br>
                è‰ºæœ¯ç›´è§‰ (Art Sense): ${artSense}/10<br>
                å›½é™…åŒ–å€¾å‘: ${globalBias > localBias ? "åå‘æµ·å¤–" : "åå‘æœ¬åœŸ"}
            </div>

            <div class="advice-card">
                <span class="advice-title">ğŸ’¡ è€å­¦é•¿çš„å»ºè®®</span>
                ${hardSkills < 8 ? "ä¸ç®¡ä½ å»å“ªï¼Œå…ˆå»æŠŠ Rhino/Blender ç»ƒå¥½ï¼Œè¿™æ˜¯åƒé¥­çš„ç¢—ã€‚" : "ä½ çš„æŠ€æœ¯å·²ç»å¤Ÿç”¨äº†ï¼Œå¤šå»çœ‹çœ‹å•†ä¸šå’Œå¿ƒç†å­¦ã€‚"}
            </div>

            <button class="next-btn" style="width:100%; margin-top:20px;" onclick="location.reload()">å†æµ‹ä¸€æ¬¡</button>
        `;
    }
</script>

</body>
</html>
